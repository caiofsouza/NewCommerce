"use strict";var app=angular.module("newCommerce",["ngRoute"]);app.config(["$locationProvider","$routeProvider",function(a,b){b.when("/",{templateUrl:"public/views/login.html",controller:"LoginCtrl"}).when("/products",{templateUrl:"public/views/products.html",controller:"ProductsCtrl"}).when("/product/:product_id",{templateUrl:"public/views/product.html",controller:"ProductCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("HomeCtrl",[function(){this.message="teste"}]),app.controller("LoginCtrl",["$location","Auth","$http","$window",function(a,b,c,d){console.log("token1: "+d.sessionStorage.token),this.user_email="",this.user_password="",this.auth=new b,this.user_login=function(){this.auth.checkUser({username:this.user_email,password:this.user_password}),this.messageError="",""!=this.user_email&&""!=this.user_password?this.email_error=this.pass_error=!1:""==this.user_email?(this.email_error=!0,this.messageError="Preencha o campo de email"):(this.pass_error=!0,this.messageError="Preencha o campo de senha")}}]),app.controller("MenuCtrl",[function(a){this.user={name:"Caio Fernandes",email:"caio_fsouza@hotmail.com",active:!0}}]),app.controller("ProductCtrl",["$routeParams",function(a){this.product_id=a.product_id,this.message="Product page"}]),app.factory("Auth",["$http","$window",function(a,b){function c(){this.token=""}return c.prototype={checkUser:function(c){a({method:"POST",url:"http://localhost:3000/api/login/",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:{username:c.username,password:c.password}}).then(function(a){b.sessionStorage.token=a.data.token},function(a){console.log("Error:",a)})}},c}]);